# values.yaml fÃ¶r din "bankvault"-umbrella-chart

vault:
  enabled: true

  # Detta mappar i slutÃ¤ndan till Vault CRD:n (kind: Vault)
  vault:
    # Namn pÃ¥ Vault-instansen (matchar dina pods: bankvault-0)
    name: bankvault
    size: 1

    image: hashicorp/vault:1.14.8
    bankVaultsImage: ghcr.io/bank-vaults/bank-vaults:v1.32.0

    # LÃ¥t bank-vaults generera egna, interna TLS-cert (helt OK i klustret)
    # Vi anvÃ¤nder den mountade /vault/tls som redan finns i podden.
    config:
      listener:
        tcp:
          address: 0.0.0.0:8200
          tls_disable: false
          tls_cert_file: /vault/tls/server.crt
          tls_key_file: /vault/tls/server.key
          tls_client_ca_file: /vault/tls/ca.crt

      storage:
        file:
          path: /vault/file

      api_addr: https://bankvault.bankvault.svc:8200
      cluster_addr: https://bankvault.bankvault.svc:8201

      telemetry:
        statsd_address: 127.0.0.1:9125

    # ğŸ” Viktigt: se till att unseal-hemligheten hamnar i rÃ¤tt namespace
    unsealConfig:
      options:
        preFlightChecks: true
      kubernetes:
        secretNamespace: bankvault   # <--- INTE "default" lÃ¤ngre
        secretName: bank-vaults      # det namn som unsealer anvÃ¤nder

vault-operator:
  enabled: true

vault-secrets-webhook:
  enabled: true
