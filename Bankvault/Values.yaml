vault:
  fullnameOverride: bankvault

  # Aktivera Vault server
  server:
    enabled: true

    # Låt charten generera ett self-signed cert & CA
    tls:
      enabled: true

      # Låt charten AUTO-generera TLS material
      # (den skapar en Secret som både Vault och bank-vaults sidecar använder)
      secretName: ""              # tomt => charten genererar åt dig
      generate: true              # *nyckel*: be charten generera cert

      # Var CA:ns subject (matcher "vault-ca" som du såg i felet)
      ca:
        subject: "/CN=vault-ca"

    # Vault server address internt
    # (bank-vaults unsealer använder VAULT_ADDR=https://127.0.0.1:8200 redan)
    listener:
      tcp:
        address: "0.0.0.0:8200"
        tls_disable: false

  # Aktivera bank-vaults sidecar-mode
  bankVaults:
    enabled: true

    # Se till att unsealer/configurer använder samma TLS secret som servern
    # (när tls.generate=true och secretName="" sätter charten detta själv,
    # men vi är explicita här för tydlighet)
    tls:
      enabled: true
      secretName: ""        # matcha server.tls.secretName (auto-gen)

    # Unseal-konfiguration (minimalt exempel, K8s-mode med secret i bankvault-namespace)
    # OBS: Anpassa efter hur du vill lagra unseal key / root token (t.ex. Cloud KMS etc.)
    config:
      vault:
        address: https://127.0.0.1:8200
        caCert: /vault/tls/ca.crt

      unsealConfig:
        options:
          preFlightChecks: true
        kubernetes:
          secretNamespace: bankvault       # inte "default" längre
          secretName: bank-vaults

      # Disable-metrics kan du slå av/ på här
      enableMetrics: true

vault-operator:
  enabled: true

vault-secrets-webhook:
  enabled: true
